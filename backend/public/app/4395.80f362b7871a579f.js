"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4395],{4395:(F,y,r)=>{r.r(y),r.d(y,{GamesPageModule:()=>i});var u=r(177),G=r(4341),e=r(9465),P=r(8986),f=r(467),v=r(2858),m=r(2314),t=r(3953),E=r(2030);function C(n,l){if(1&n){const s=t.RV6();t.j41(0,"ion-col",12)(1,"ion-card",13),t.bIt("click",function(){const g=t.eBV(s).$implicit,_=t.XpG();return t.Njj(_.editGame(g))}),t.nrm(2,"ion-icon",14),t.j41(3,"ion-card-header",15),t.nrm(4,"ion-icon",16),t.j41(5,"ion-card-title",2),t.EFF(6),t.k0s(),t.j41(7,"ion-card-subtitle",17),t.EFF(8),t.k0s(),t.j41(9,"ion-card-subtitle",2),t.EFF(10),t.nI1(11,"date"),t.k0s()(),t.j41(12,"ion-card-content",18)(13,"ion-item",19)(14,"ion-avatar",20),t.nrm(15,"img",21),t.k0s(),t.j41(16,"ion-label",22),t.EFF(17),t.k0s(),t.j41(18,"ion-label",23),t.EFF(19),t.k0s()(),t.j41(20,"ion-item",19)(21,"ion-avatar",20),t.nrm(22,"img",21),t.k0s(),t.j41(23,"ion-label",22),t.EFF(24),t.k0s(),t.j41(25,"ion-label",23),t.EFF(26),t.k0s()(),t.j41(27,"ion-button",24),t.bIt("click",function(g){const _=t.eBV(s).$implicit;return t.XpG().deleteGame(_),t.Njj(g.stopPropagation())}),t.EFF(28," Delete "),t.nrm(29,"ion-icon",25),t.k0s()()()()}if(2&n){const s=l.$implicit,c=t.XpG();t.R7$(6),t.SpI("Game ",s.id,""),t.R7$(),t.FS9("color","finished"==s.status?"white":"warning"),t.R7$(),t.JRh(s.status),t.R7$(2),t.JRh(t.i5U(11,14,s.created_at,"dd.MM.yyyy HH:mm")),t.R7$(5),t.Y8G("src",c.services.apiService.getAssetsPath(s.player1.avatar),t.B4B),t.R7$(),t.Y8G("color",10==s.player1_score?"success":"white"),t.R7$(),t.SpI(" ",s.player1.pseudo," "),t.R7$(),t.Y8G("color",10==s.player1_score?"success":"white"),t.R7$(),t.SpI(" ",s.player1_score," "),t.R7$(3),t.Y8G("src",c.services.apiService.getAssetsPath(s.player2.avatar),t.B4B),t.R7$(),t.Y8G("color",10==s.player2_score?"success":"white"),t.R7$(),t.SpI(" ",s.player2.pseudo," "),t.R7$(),t.Y8G("color",10==s.player2_score?"success":"white"),t.R7$(),t.SpI(" ",s.player2_score," ")}}function b(n,l){1&n&&(t.j41(0,"div",26)(1,"ion-text",27),t.EFF(2,"No game to show"),t.k0s()())}function p(n,l){1&n&&(t.j41(0,"ion-text",28)(1,"p",2),t.EFF(2,"No more game !"),t.k0s(),t.nrm(3,"p"),t.k0s())}const o=[{path:"",component:(()=>{var n;class l{constructor(c){this.services=c,this.page=1}ngOnInit(){}ionViewDidEnter(){this.page=1,this.getGames()}createGame(){var c=this;return(0,f.A)(function*(){const g=yield c.services.modalController.create({component:m.Y,componentProps:{}});g.present();const{data:_,role:h}=yield g.onWillDismiss();"data"===h&&(console.log(_),c.games.unshift(_),c.editGame(_))})()}editGame(c){var g=this;return(0,f.A)(function*(){const _=yield g.services.modalController.create({component:v.c,componentProps:{game:c}});_.present();const{data:h,role:j}=yield _.onWillDismiss();"data"===j&&(c=h)})()}deleteGame(c){var g=this;return(0,f.A)(function*(){yield(yield g.services.alertController.create({header:"Delete game ?",message:"Are you sure to want to delete this game ?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Delete",role:"confirm",cssClass:"alert-button-confirm",handler:()=>{g.services.apiService.delete("game/"+c.id).subscribe(h=>{g.services.utilsService.presentToast("Game deleted"),g.games=g.games.filter(j=>j.id!=h.id)})}}]})).present()})()}getGames(){this.services.apiService.get("game?page="+this.page).subscribe(c=>{console.log(c),this.games=null==this.games?c:this.games.concat(c),null!=this.spinner&&this.spinner.complete(),null!=this.spinner&&0==c.length&&(this.spinner.disabled=!0)})}loadData(c){this.page++,c&&(this.spinner=c.target),this.getGames()}}return(n=l).\u0275fac=function(c){return new(c||n)(t.rXU(E.x))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-games"]],decls:13,vars:4,consts:[[3,"fullscreen"],[1,"max-wrapper"],[1,"ion-text-center"],[1,"ion-justify-content-center"],["size","6","size-md","3",1,"flex-col-vertical-center","ion-padding",3,"click"],[1,"add-card","hover","flex-col-vertical-center"],["name","add","size","large"],["size","6","size-md","3",4,"ngFor","ngForOf"],["class","all-width ion-text-center ion-margin",4,"ngIf"],["color","medium",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Loading"],["size","6","size-md","3"],[1,"hover","flex-col-vertical-center",3,"click"],["name","pencil",1,"edit-icon"],[1,"flex-col-vertical-center"],["size","large","name","football-outline"],[1,"ion-text-center","ion-text-capitalize",3,"color"],[1,"flex-col-center"],["lines","none"],["slot","start"],["alt","Profile",3,"src"],[1,"player-name",3,"color"],["slot","end",3,"color"],["shape","round","fill","outline","color","danger",1,"ion-margin-top",3,"click"],["name","trash","slot","end"],[1,"all-width","ion-text-center","ion-margin"],["color","medium",1,"ion-text-center"],["color","medium"]],template:function(c,g){1&c&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"h1",2),t.EFF(3,"My games"),t.k0s(),t.j41(4,"ion-row",3)(5,"ion-col",4),t.bIt("click",function(){return g.createGame()}),t.j41(6,"div",5),t.nrm(7,"ion-icon",6),t.k0s()(),t.DNE(8,C,30,17,"ion-col",7),t.k0s(),t.DNE(9,b,3,0,"div",8)(10,p,4,0,"ion-text",9),t.j41(11,"ion-infinite-scroll",10),t.bIt("ionInfinite",function(h){return g.loadData(h)}),t.nrm(12,"ion-infinite-scroll-content",11),t.k0s()()()),2&c&&(t.Y8G("fullscreen",!0),t.R7$(8),t.Y8G("ngForOf",g.games),t.R7$(),t.Y8G("ngIf",g.games&&0==g.games.length),t.R7$(),t.Y8G("ngIf",null!=g.spinner&&g.spinner.disabled))},dependencies:[u.Sq,u.bT,e.mC,e.Jm,e.b_,e.I9,e.ME,e.HW,e.tN,e.hU,e.W9,e.iq,e.Ax,e.Hp,e.uz,e.he,e.ln,e.IO,u.vh],styles:[".add-card[_ngcontent-%COMP%]{background-color:var(--ion-card-background);border-radius:30px;flex-grow:1;width:100%;min-width:0}.edit-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.player-name[_ngcontent-%COMP%]{overflow:hidden;max-width:70px;text-wrap:nowrap;text-overflow:ellipsis!important;font-size:14px}"]}),l})()},{path:"edit-game",loadChildren:()=>r.e(6674).then(r.bind(r,6674)).then(n=>n.EditGamePageModule)},{path:"create-game",loadChildren:()=>r.e(7568).then(r.bind(r,7568)).then(n=>n.CreateGamePageModule)}];let a=(()=>{var n;class l{}return(n=l).\u0275fac=function(c){return new(c||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[P.iI.forChild(o),P.iI]}),l})(),i=(()=>{var n;class l{}return(n=l).\u0275fac=function(c){return new(c||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[u.MD,G.YN,e.bv,a]}),l})()},2314:(F,y,r)=>{r.d(y,{Y:()=>p});var u=r(467),G=r(7593),e=r(3953),P=r(2030),f=r(177),v=r(4341),m=r(9465);function t(d,o){if(1&d&&(e.qex(0),e.j41(1,"ion-avatar",15),e.nrm(2,"img",16),e.k0s(),e.j41(3,"ion-label",17),e.EFF(4),e.k0s(),e.bVm()),2&d){const a=e.XpG();e.R7$(2),e.Y8G("src",a.services.apiService.getAssetsPath(a.player1.avatar),e.B4B),e.R7$(2),e.SpI(" ",a.player1.pseudo," ")}}function E(d,o){1&d&&(e.qex(0),e.nrm(1,"ion-icon",18),e.j41(2,"ion-label",17),e.EFF(3," Assign player 1 "),e.k0s(),e.bVm())}function C(d,o){if(1&d&&(e.qex(0),e.j41(1,"ion-avatar",15),e.nrm(2,"img",16),e.k0s(),e.j41(3,"ion-label",17),e.EFF(4),e.k0s(),e.bVm()),2&d){const a=e.XpG();e.R7$(2),e.Y8G("src",a.services.apiService.getAssetsPath(a.player2.avatar),e.B4B),e.R7$(2),e.SpI(" ",a.player2.pseudo," ")}}function b(d,o){1&d&&(e.qex(0),e.nrm(1,"ion-icon",18),e.j41(2,"ion-label",17),e.EFF(3," Assign player 2 "),e.k0s(),e.bVm())}let p=(()=>{var d;class o{constructor(i){this.services=i,this.status="waiting",this.touched=!1}ngOnInit(){}ionViewWillEnter(){history.pushState({modal:!0,desc:"fake state for our modal"},null)}ionViewWillLeave(){window.history.state.modal&&window.history.back()}assignPlayer(i){var n=this;return(0,u.A)(function*(){const l=yield n.services.modalController.create({component:G.c,componentProps:{type:"modal"}});l.present();const{data:s}=yield l.onWillDismiss();null!=s&&(console.log(s),1==i?n.player1=s:n.player2=s)})()}storeGame(){null!=this.player1.id?null!=this.player2.id?this.player2.id!=this.player1.id?(this.touched=!0,this.services.apiService.post("game",{status:this.status,player1_id:this.player1.id,player2_id:this.player2.id,player1_score:0,player2_score:0}).subscribe(n=>{this.services.utilsService.presentToast("Game saved"),this.dismiss("data",n)})):this.services.utilsService.presentToastWarning("Please assign different players"):this.services.utilsService.presentToastWarning("Please assign the second player"):this.services.utilsService.presentToastWarning("Please assign the first player")}dismiss(i="dismiss",n=null){var l=this;return(0,u.A)(function*(){(yield l.services.modalController.getTop())&&l.services.modalController.dismiss(n,i)})()}}return(d=o).\u0275fac=function(i){return new(i||d)(e.rXU(P.x))},d.\u0275cmp=e.VBU({type:d,selectors:[["app-create-game"]],hostBindings:function(i,n){1&i&&e.bIt("popstate",function(s){return n.dismiss(s)},!1,e.tSv)},decls:29,vars:11,consts:[[3,"fullscreen"],["vertical","top","horizontal","end","slot","fixed"],["color","white","size","small",3,"click"],["name","close"],[1,"container"],[1,"ion-text-center","bold"],["label","Status","placeholder","Choose status",3,"ngModelChange","ngModel"],["value","finished"],["value","waiting"],["button","",3,"click"],[4,"ngIf"],["slot","end","name","create-outline"],[1,"all-width","ion-text-center"],["shape","round","size","large",3,"click","disabled"],["slot","end","name","save-outline"],["slot","start"],["alt","Profile",3,"src"],[1,"player-name"],["slot","start","name","person-circle-outline"]],template:function(i,n){1&i&&(e.j41(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button",2),e.bIt("click",function(){return n.dismiss()}),e.nrm(3,"ion-icon",3),e.k0s()(),e.j41(4,"div",4)(5,"h1",5),e.EFF(6,"New game"),e.k0s(),e.j41(7,"ion-list")(8,"ion-item")(9,"ion-select",6),e.mxI("ngModelChange",function(s){return e.DH7(n.status,s)||(n.status=s),s}),e.j41(10,"ion-select-option",7),e.EFF(11,"Finished"),e.k0s(),e.j41(12,"ion-select-option",8),e.EFF(13,"Waiting"),e.k0s()()(),e.j41(14,"ion-list-header")(15,"ion-label"),e.EFF(16,"Players"),e.k0s()(),e.j41(17,"ion-item",9),e.bIt("click",function(){return n.assignPlayer(1)}),e.DNE(18,t,5,2,"ng-container",10)(19,E,4,0,"ng-container",10),e.nrm(20,"ion-icon",11),e.k0s(),e.j41(21,"ion-item",9),e.bIt("click",function(){return n.assignPlayer(2)}),e.DNE(22,C,5,2,"ng-container",10)(23,b,4,0,"ng-container",10),e.nrm(24,"ion-icon",11),e.k0s()(),e.j41(25,"div",12)(26,"ion-button",13),e.bIt("click",function(){return n.storeGame()}),e.EFF(27," Save "),e.nrm(28,"ion-icon",14),e.k0s()()()()),2&i&&(e.Y8G("fullscreen",!0),e.R7$(9),e.R50("ngModel",n.status),e.R7$(8),e.AVh("item-error",n.touched&&null==n.player1),e.R7$(),e.Y8G("ngIf",null!=n.player1),e.R7$(),e.Y8G("ngIf",null==n.player1),e.R7$(2),e.AVh("item-error",n.touched&&null==n.player2),e.R7$(),e.Y8G("ngIf",null!=n.player2),e.R7$(),e.Y8G("ngIf",null==n.player2),e.R7$(3),e.Y8G("disabled",null==n.player1||null==n.player2))},dependencies:[f.bT,v.BC,v.vS,m.mC,m.Jm,m.W9,m.Q8,m.YW,m.iq,m.uz,m.he,m.nf,m.AF,m.Nm,m.Ip,m.Je],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{flex-grow:1}h1[_ngcontent-%COMP%]{border-bottom:2px solid white;padding:10px}ion-button[_ngcontent-%COMP%]{color:#fff}"]}),o})()},2858:(F,y,r)=>{r.d(y,{c:()=>b});var u=r(467),G=r(7593),e=r(3953),P=r(2030),f=r(177),v=r(4341),m=r(9465);function t(p,d){if(1&p){const o=e.RV6();e.j41(0,"div",19),e.bIt("click",function(){const i=e.eBV(o).index,n=e.XpG(2);return e.Njj(n.game.player1_score=i+1)}),e.k0s()}if(2&p){const o=d.index,a=e.XpG(2);e.AVh("filled-point-player1",o+1<=a.game.player1_score)}}function E(p,d){if(1&p){const o=e.RV6();e.j41(0,"div",19),e.bIt("click",function(){const i=e.eBV(o).index,n=e.XpG(2);return e.Njj(n.game.player2_score=i+1)}),e.k0s()}if(2&p){const o=d.index,a=e.XpG(2);e.AVh("filled-point-player2",o+1<=a.game.player2_score)}}function C(p,d){if(1&p){const o=e.RV6();e.j41(0,"div",5)(1,"h1",6),e.EFF(2),e.k0s(),e.j41(3,"ion-list")(4,"ion-item")(5,"ion-select",7),e.mxI("ngModelChange",function(i){e.eBV(o);const n=e.XpG();return e.DH7(n.game.status,i)||(n.game.status=i),e.Njj(i)}),e.j41(6,"ion-select-option",8),e.EFF(7,"Finished"),e.k0s(),e.j41(8,"ion-select-option",9),e.EFF(9,"Waiting"),e.k0s()()(),e.j41(10,"ion-list-header")(11,"ion-label"),e.EFF(12,"Score"),e.k0s()(),e.j41(13,"div",10)(14,"ion-item",11),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.assignPlayer(1))}),e.j41(15,"ion-avatar",12),e.nrm(16,"img",13),e.k0s(),e.j41(17,"ion-label",14),e.EFF(18),e.k0s(),e.nrm(19,"ion-icon",15),e.k0s(),e.j41(20,"div",16),e.DNE(21,t,1,2,"div",17),e.k0s()(),e.j41(22,"div",10)(23,"ion-item",11),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.assignPlayer(2))}),e.j41(24,"ion-avatar",12),e.nrm(25,"img",13),e.k0s(),e.j41(26,"ion-label",14),e.EFF(27),e.k0s(),e.nrm(28,"ion-icon",15),e.k0s(),e.j41(29,"div",16),e.DNE(30,E,1,2,"div",18),e.k0s()()()()}if(2&p){const o=e.XpG();e.R7$(2),e.SpI("Game ",o.game.id,""),e.R7$(3),e.R50("ngModel",o.game.status),e.R7$(11),e.Y8G("src",o.services.apiService.getAssetsPath(o.game.player1.avatar),e.B4B),e.R7$(2),e.Lme(" ",o.game.player1.pseudo," (",o.game.player1_score,") "),e.R7$(3),e.Y8G("ngForOf",o.scoreArray),e.R7$(4),e.Y8G("src",o.services.apiService.getAssetsPath(o.game.player2.avatar),e.B4B),e.R7$(2),e.Lme(" ",o.game.player2.pseudo," (",o.game.player2_score,") "),e.R7$(3),e.Y8G("ngForOf",o.scoreArray)}}let b=(()=>{var p;class d{constructor(a,i){this.services=a,this.cdr=i,this.scoreArray=Array(10).fill(0).map((n,l)=>l)}assignPlayer(a){var i=this;return(0,u.A)(function*(){const n=yield i.services.modalController.create({component:G.c,componentProps:{type:"modal"}});n.present();const{data:l}=yield n.onWillDismiss();null!=l&&(console.log(l),1==a?(i.game.player1=l,i.game.player1_id=l.id):(i.game.player2=l,i.game.player2_id=l.id),i.cdr.detectChanges())})()}ngOnInit(){}ionViewWillEnter(){history.pushState({modal:!0,desc:"fake state for our modal"},null)}ionViewWillLeave(){window.history.state.modal&&window.history.back()}saveGame(){this.services.apiService.put("game/"+this.game.id,this.game).subscribe(a=>{this.services.utilsService.presentToast("Game saved")})}dismiss(a="dismiss"){var i=this;return(0,u.A)(function*(){i.saveGame(),(yield i.services.modalController.getTop())&&i.services.modalController.dismiss(i.game,a)})()}}return(p=d).\u0275fac=function(a){return new(a||p)(e.rXU(P.x),e.rXU(e.gRc))},p.\u0275cmp=e.VBU({type:p,selectors:[["app-edit-game"]],hostBindings:function(a,i){1&a&&e.bIt("popstate",function(l){return i.dismiss(l)},!1,e.tSv)},inputs:{game:"game"},decls:5,vars:2,consts:[[3,"fullscreen"],["vertical","top","horizontal","end","slot","fixed"],["color","white","size","small",3,"click"],["name","close"],["class","container",4,"ngIf"],[1,"container"],[1,"ion-text-center","bold"],["label","Status","placeholder","Choose status",3,"ngModelChange","ngModel"],["value","finished"],["value","waiting"],[1,"container-score"],["button","",3,"click"],["slot","start"],["alt","Profile",3,"src"],[1,"player-name"],["slot","end","name","create-outline"],[1,"score","flex-col-center"],["class","point hover",3,"filled-point-player1","click",4,"ngFor","ngForOf"],["class","point hover",3,"filled-point-player2","click",4,"ngFor","ngForOf"],[1,"point","hover",3,"click"]],template:function(a,i){1&a&&(e.j41(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button",2),e.bIt("click",function(){return i.dismiss()}),e.nrm(3,"ion-icon",3),e.k0s()(),e.DNE(4,C,31,10,"div",4),e.k0s()),2&a&&(e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("ngIf",null!=i.game))},dependencies:[f.Sq,f.bT,v.BC,v.vS,m.mC,m.W9,m.Q8,m.YW,m.iq,m.uz,m.he,m.nf,m.AF,m.Nm,m.Ip,m.Je],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{flex-grow:1}h1[_ngcontent-%COMP%]{border-bottom:2px solid white;padding:10px}.point[_ngcontent-%COMP%]{border-radius:5px;height:25px;width:25px;margin:10px;border:1px dotted white}.filled-point-player1[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);border:0px}.filled-point-player2[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);border:0px}"]}),d})()}}]);